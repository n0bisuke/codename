# コードネーム キーカードアプリ 設計書

## 要件定義書

### 概要
「コードネーム」というボードゲームのキーカードをWebアプリ化し、オフラインで使用できるようにする。キーカードのパターン読みができないよう、ランダムに生成する機能を実装する。

### 機能要件
1. **キーカード生成機能**
   - 5x5のマス目でキーカードを表示
   - 各マスの内訳：
     - 青マス：8個
     - 赤マス：9個
     - 白マス（何もなし）：7個
     - 黒マス（アウト）：1個（髑髏マークを表示）
   - マスの配置はランダムに生成

2. **UI要件**
   - シンプルで見やすいデザイン
   - レスポンシブ対応（様々なデバイスで使用可能）
   - 色覚特性に配慮したデザイン

3. **操作要件**
   - 新しいキーカードを生成するボタン
   - オフラインでも動作する（PWA対応）

### 非機能要件
1. **パフォーマンス**
   - 高速な読み込みと描画
   - 軽量な実装

2. **互換性**
   - 主要なモダンブラウザで動作すること
   - モバイルデバイスでも問題なく使用できること

3. **セキュリティ**
   - ユーザーデータの収集なし
   - 外部サーバーへの依存なし

## 設計書

### 概略設計
このアプリケーションは、シンプルなHTML/CSS/JavaScriptで実装する。外部ライブラリへの依存を最小限に抑え、軽量かつオフラインで動作するWebアプリケーションとする。

### 機能設計

#### キーカード生成ロジック
1. 5x5のマス目（合計25マス）を生成
2. 各マスの種類（青、赤、白、黒）を以下の割合でランダムに割り当て：
   - 青マス：8個
   - 赤マス：9個
   - 白マス：7個
   - 黒マス：1個
3. 生成されたキーカードを画面に表示

#### UI設計
1. ヘッダー部分：アプリ名と新しいキーカードを生成するボタンを配置
2. メイン部分：5x5のキーカードを表示
3. フッター部分：アプリの説明や著作権情報を表示

### コンポーネント構成

#### ファイル構成
```
/
├── index.html        # メインHTMLファイル
├── manifest.json     # PWA用マニフェスト
├── service-worker.js # PWA用サービスワーカー
├── assets/
│   ├── icons/        # アプリアイコン
│   │   └── skull.svg # 髑髏アイコン
│   └── favicon.ico   # ファビコン
├── css/
│   └── style.css     # スタイルシート
└── js/
    ├── app.js        # メインアプリケーションロジック
    └── keycard.js    # キーカード生成ロジック
```

#### モジュール設計

**app.js**
- アプリケーションの初期化
- イベントリスナーの設定
- PWA関連の設定

**keycard.js**
- `KeyCard` クラス：キーカードの生成と管理を担当
  - `generateKeyCard()`: 新しいキーカードを生成するメソッド
  - `renderKeyCard()`: 生成したキーカードをDOMに描画するメソッド

### 画面設計
シンプルな一画面構成とし、以下の要素を含める：
- ヘッダー：アプリ名と「新しいカードを生成」ボタン
- メイン：5x5のキーカードグリッド
  - 青マス：青色で表示
  - 赤マス：赤色で表示
  - 白マス：白色で表示
  - 黒マス：黒色で髑髏マークを表示

### 技術スタック
- HTML5
- CSS3（Flexboxまたはグリッドレイアウトを使用）
- JavaScript（ES6+）
- PWA（Progressive Web App）技術
  - Service Worker
  - Web App Manifest

### テスト計画
- 単体テスト：Jest を使用して各関数の動作を検証
- 視覚的テスト：異なるデバイスとブラウザでの表示確認
- オフラインテスト：ネットワーク接続なしでの動作確認

## 実装スケジュール
1. プロジェクト構成とファイル作成
2. キーカード生成ロジックの実装
3. UI実装（HTML/CSS）
4. イベントハンドリングとインタラクション実装
5. PWA対応
6. テストとデバッグ
7. 最終調整とリリース
